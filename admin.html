<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Painel de Administração - Folhetos</title>
    <link rel="stylesheet" href="css/styles.css">
    <link rel="stylesheet" href="css/admin.css">
</head>
<body>
    <script type="module" src="js/authGuard.js"></script>

    <div class="header-admin">
        <h1>Painel de Administração</h1>
        <button id="logoutButton">Sair</button>
    </div>

    <div class="container">
        <h2>Gerenciar Lojas</h2>
        <div class="form-container">
            <h3>Adicionar/Editar Loja</h3>
            <form id="storeForm">
                <input type="hidden" id="storeId">
                <input type="text" id="storeName" placeholder="Nome da Loja" required>
                <label for="storeLogoFile">Logo da Loja:</label>
                <input type="file" id="storeLogoFile" accept="image/*">
                <img id="logoPreview" src="" alt="Pré-visualização da logo" style="width: 150px; display: none; margin-top: 10px;">
                <input type="hidden" id="storeLogoUrl">
                <input type="text" id="storeCep" placeholder="CEP (apenas números)" maxlength="8">
                <input type="text" id="storeStreet" placeholder="Rua / Logradouro" required>
                <input type="text" id="storeNumber" placeholder="Número" required>
                <input type="text" id="storeNeighborhood" placeholder="Bairro" required>
                <input type="text" id="storeCity" placeholder="Cidade" required>
                <input type="text" id="storeState" placeholder="Estado (UF)" required>
                <div class="input-group">
                    <span>+55</span>
                    <input type="text" id="storeWhatsapp" placeholder="DDD + Número (ex: 11999999999)" required>
                </div>
                <button type="submit">Salvar Loja</button>
                <button type="button" id="cancelStoreEdit" style="display:none; background-color: #ccc;">Cancelar</button>
            </form>
        </div>

        <table id="storeTable">
            <thead>
                <tr>
                    <th>Nome da Loja</th>
                    <th>Link do Catálogo</th>
                    <th>Ações</th>
                </tr>
            </thead>
            <tbody></tbody>
        </table>
    </div>
    <!-- Wrapper para o Gerenciamento de Categorias e Produtos -->
    <div id="managementWrapper" style="display: none;">

        <!-- SEÇÃO DE CATEGORIAS -->
        <div class="container" id="categoriesSection">
            <hr>
            <h2 id="selectedStoreNameForCategories"></h2>
            <h3>Gerenciar Categorias</h3>
            <div class="form-container">
                <form id="categoryForm">
                    <input type="hidden" id="categoryId">
                    <input type="text" id="categoryName" placeholder="Nome da Categoria (ex: Pizzas)" required>
                    <button type="submit">Salvar Categoria</button>
                </form>
            </div>
        
            <table id="categoryTable">
                <thead>
                    <tr>
                        <th>Nome da Categoria</th>
                        <th>Ações</th>
                    </tr>
                </thead>
                <tbody></tbody>
            </table>
        </div>

        <!-- SEÇÃO DE PRODUTOS -->
        <div class="container" id="productsSection">
            <hr>
            <h2 id="selectedStoreName"></h2>
            <h3>Gerenciar Itens do Cardápio</h3>
            <div class="form-container">
                <form id="productForm">
                    <input type="hidden" id="productId">
                    <input type="text" id="name" placeholder="Nome do Item (ex: Pizza Calabresa)" required>
                    <input type="text" id="description" placeholder="Descrição (ex: Molho, queijo, calabresa...)" required>
                    <input type="number" id="price" placeholder="Preço (ex: 35.50)" step="0.01" required>
                    
                    <label for="productCategory">Categoria:</label>
                    <select id="productCategory" required>
                        <option value="">-- Selecione uma Categoria --</option>
                    </select>

                    <label for="imageFile">Imagem do Item:</label>
                    <input type="file" id="imageFile" accept="image/*">
                    <img id="imagePreview" src="" alt="Pré-visualização" style="width: 100px; display: none; margin-top: 10px;">
                    <input type="hidden" id="imageUrl">
                    <label for="isPromotional">
                        <input type="checkbox" id="isPromotional"> Item em Destaque/Promoção
                    </label>
                    <button type="submit">Salvar Item</button>
                    <button type="button" id="cancelProductEdit" style="display:none; background-color: #ccc;">Cancelar</button>
                </form>
            </div>

            <table id="productTable">
                <thead>
                    <tr>
                        <th>Nome</th>
                        <th>Descrição</th>
                        <th>Preço</th>
                        <th>Categoria</th>
                        <th>Imagem</th>
                        <th>Destaque</th>
                        <th>Ações</th>
                    </tr>
                </thead>
                <tbody></tbody>
            </table>
        </div>
    </div>


    <!-- Chamadas dos scripts -->
    <script type="module" src="js/categoryManager.js"></script>
    <script type="module" src="js/productManager.js"></script>
    <script type="module" src="js/storeManager.js"></script>
</body>
</html>
